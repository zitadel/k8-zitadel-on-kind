# This secret provides Cloudflare API tokens for Traefik. It allows Traefik to
# perform DNS-01 challenges and manage DNS zones when issuing TLS certificates.
# Both values are taken from `.Values.cfToken`, which should be populated by your
# deployment pipeline or a secret manager. Always scope this token to the minimum
# required permissions (DNS edit, zone read) rather than granting full account
# access. Rotate it regularly and treat it as sensitive.
apiVersion: v1
kind: Secret
metadata:
    name: traefik-cloudflare-token
    namespace: traefik-system
type: Opaque
stringData:
    CLOUDFLARE_DNS_API_TOKEN: {{ .Values.cfToken | quote }}
    CLOUDFLARE_ZONE_API_TOKEN: {{ .Values.cfToken | quote }}

---

# This secret contains the Zitadel master key, provided via `.Values.zitadel.masterKey`.
# The master key is used to encrypt and decrypt all sensitive data inside Zitadel.
#
# ⚠️ Important:
# - The master key is immutable by design. Zitadel uses it as the root key for
#   all encryption. If the key changes, Zitadel cannot decrypt its existing data,
#   leading to irreversible data loss.
# - Because of this, `immutable: true` is enabled at the Kubernetes level to
#   prevent accidental updates. The only way to change this secret is to delete
#   and recreate it, but doing so will render Zitadel unusable.
# - Always generate a secure, random 32-character value before the first
#   deployment and store it in a secure secret manager (Vault, SOPS, AWS Secrets
#   Manager, etc.).
#
# References:
#   https://zitadel.com/docs/self-hosting/manage/configure#masterkey
#
apiVersion: v1
kind: Secret
metadata:
    name: zitadel-masterkey
type: Opaque
immutable: true
stringData:
    masterKey: {{ .Values.zitadel.masterKey | quote }}
